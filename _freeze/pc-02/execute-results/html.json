{
  "hash": "cf2ba5dbdf66a770d87eaa4a8b27f2d2",
  "result": {
    "markdown": "# 2A Lab 2 Week 3  {.unnumbered}\n\n\n\n\n\n\n**This is the pair coding activity related to @sec-wrangling.**\n\n\n\n\n::: {.cell}\n\n:::\n\n\n\nWe will continue working with the data from Binfet et al. (2021), focusing on the randomised controlled trial of therapy dog interventions. Today, our goal is to **calculate an average `Flourishing` score for each participant** at time point 1 (pre-intervention) using the raw data file `dog_data_raw`. Currently, the data looks like this:\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n<div class=\"kable-table\">\n\n| RID| F1_1| F1_2| F1_3| F1_4| F1_5| F1_6| F1_7| F1_8|\n|---:|----:|----:|----:|----:|----:|----:|----:|----:|\n|   1|    6|    7|    5|    5|    7|    7|    6|    6|\n|   2|    5|    7|    6|    5|    5|    5|    5|    4|\n|   3|    5|    5|    5|    6|    6|    6|    5|    5|\n|   4|    7|    6|    7|    7|    7|    6|    7|    4|\n|   5|    5|    5|    4|    6|    7|    7|    7|    6|\n\n</div>\n:::\n:::\n\n\n\nHowever, we want the data to look like this:\n\n\n::: {.cell}\n::: {.cell-output-display}\n<div class=\"kable-table\">\n\n| RID| Flourishing_pre|\n|---:|---------------:|\n|   1|           6.125|\n|   2|           5.250|\n|   3|           5.375|\n|   4|           6.375|\n|   5|           5.875|\n\n</div>\n:::\n:::\n\n\n\n\n## Task 1: Open the R project you created last week {.unnumbered}\n\nIf you haven’t created an R project for the lab yet, please do so now. If you already have one set up, go ahead and open it.\n\n\n## Task 2: Open your `.Rmd` file from last week {.unnumbered}\n\nSince we haven’t used it much yet, feel free to continue using the `.Rmd` file you created last week in Task 2.\n\n\n## Task 3: Load in the library and read in the data {.unnumbered}\n\nThe data should be in your project folder. If you didn’t download it last week, or if you’d like a fresh copy, you can download the data again here: [data_pair_coding](data/data_pair_coding.zip \"download\").\n\nWe will be using the `tidyverse` package today, and the data file we need to read in is `dog_data_raw.csv`.\n\n\n::: {.callout-note collapse=\"true\" icon=\"false\"}\n\n## Hint\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# loading tidyverse into the library\nlibrary(???)\n\n# reading in `dog_data_raw.csv`\ndog_data_raw <- read_csv(\"???\")\n```\n:::\n\n\n:::\n\n\n## Task 4: Calculating the mean for `Flourishing_pre` {.unnumbered}\n\n\n* **Step 1**: Select all relevant columns from `dog_data_raw`, including participant ID and all items from the `Flourishing` questionnaire completed before the intervention. Store this data in an object called `data_flourishing`.\n\n\n::: {.callout-note collapse=\"true\" icon=\"false\"}\n\n## Hint\n\nLook at the codebook. Try to determine:\n\n* The variable name of the column where the participant ID is stored.\n* The items related to the Flourishing scale at the pre-intervention stage.\n\n::: {.callout-note collapse=\"true\" icon=\"false\"}\n\n## More concrete hint\n\nFrom the codebook, we know that:\n\n* The participant ID column is called `RID`.\n* The Flourishing items at the pre-intervention stage start with `F1_`.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndata_flourishing <- ??? %>% \n  select(???, F1_???:F1_???)\n```\n:::\n\n\n:::\n\n:::\n\n\n* **Step 2**: Pivot the data from wide format to long format so we can calculate the average score more easily (in step 3).\n\n::: {.callout-note collapse=\"true\" icon=\"false\"}\n\n## Hint\n\nWhich pivot function should you use? We have `pivot_wider()` and `pivot_longer()` to choose from.\n\nWe also need 3 arguments in that function:\n\n* The columns you want to select (e.g., all the Flourishing items),\n* The name of the column where the current column headings will be stored (e.g., \"Questionnaire\"),\n* The name of the column that should store all the values (e.g., \"Responses\").\n\n\n::: {.callout-note collapse=\"true\" icon=\"false\"}\n\n## More concrete hint\n\nWe need `pivot_longer()`. You already encountered `pivot_longer()` in first year (or in the individual walkthrough if you have already completed this Chapter). The 3 arguments was also a give-away; `pivot_wider()` only requires 2 arguments.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n  pivot_longer(cols = ???, names_to = \"???\", values_to = \"???\")\n```\n:::\n\n\n:::\n\n:::\n\n* **Step 3**: Calculate the average Flourishing score per participant and name this column `Flourishing_pre` to match the table above.\n\n\n::: {.callout-note collapse=\"true\" icon=\"false\"}\n\n## Hint\n\nBefore summarising the mean, you may need to group the data.\n\n::: {.callout-note collapse=\"true\" icon=\"false\"}\n\n## More concrete hint\n\nTo compute an average score **per participant**, we would need to group by participant ID first.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n  group_by(???) %>% \n  summarise(Flourishing_pre = mean(???)) %>% \n  ungroup()\n```\n:::\n\n:::\n\n:::\n\n\n\n\n::: {.callout-caution collapse=\"true\" icon=\"false\"}\n\n## Solution\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# loading tidyverse into the library\nlibrary(tidyverse)\n\n# reading in `dog_data_raw.csv`\ndog_data_raw <- read_csv(\"dog_data_raw.csv\")\n\n# Task 4: Tidying \ndata_flourishing <- dog_data_raw %>% \n  # Step 1\n  select(RID, F1_1:F1_8) %>% \n  # Step 2\n  pivot_longer(cols = -RID, names_to = \"Questionnaire\", values_to = \"Responses\") %>% \n  # Step 3\n  group_by(RID) %>% \n  summarise(Flourishing_pre = mean(Responses)) %>% \n  ungroup()\n```\n:::\n\n\n:::\n\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}