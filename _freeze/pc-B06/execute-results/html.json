{
  "hash": "590274da229f244c0fcd45f3b04ca5e3",
  "result": {
    "markdown": "# 2B Lab 7 Week 9  {.unnumbered}\n\n\n\n\n\n\n**This is the pair coding activity related to @sec-factorial.**\n\n\n## Task 1: Open the R project for the lab {.unnumbered}\n\n## Task 2: Create a new `.Rmd` file {.unnumbered}\n\n## Task 3: Load in the library and read in the data {.unnumbered}\n\nThe data should already be in your project folder. If you want a fresh copy, you can download the data again here: [data_pair_coding](data/data_pair_coding.zip \"download\").\n\nWe are using the packages `afex`, `tidyverse`, `performance`, `emmeans`, and `effectsize` today.\n\nToday, we need to read in `dog_data_clean_wide.csv` and `dog_data_clean_long`. \n\n\n::: {.cell}\n\n:::\n\n\n::: {.callout-caution collapse=\"true\" icon=\"false\"} \n\n## Solution \n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(afex)\nlibrary(tidyverse)\nlibrary(performance)\nlibrary(emmeans)\nlibrary(effectsize)\n\ndog_data_wide <- read_csv(\"dog_data_clean_wide.csv\")\ndog_data_long <- read_csv(\"dog_data_clean_long.csv\")\n```\n:::\n\n:::\n\n## Task 4: Tidy data & Selecting variables of interest  {.unnumbered}\n\n\nLet's define a potential research question:\n\n**How does the Year of Study (1st, 2nd, 3rd, 4th, 5th or above) and Time point (pre- and post-intervention scores) affect perceived Happiness?**\n\nThis is a 2 x 5 mixed factorial ANOVA, with one <select class='webex-select'><option value='blank'></option><option value='x'>between-subjects factor</option><option value='answer'>within-subjects factor</option></select> (Stage: pre vs. post) and one <select class='webex-select'><option value='blank'></option><option value='answer'>between-subjects factor</option><option value='x'>within-subjects factor</option></select> (year of study: 1st, 2nd, 3rd, 4th, 5th or above). The <select class='webex-select'><option value='blank'></option><option value='x'>independent</option><option value='answer'>dependent</option></select> variable is self-reported Happiness Score.\n\nNot much tidying to do today. All the variables and average scores are already tidied up in `dog_data_long`. We just need to check for missing values in our variables of interest. Best to do this on a reduced dataframe.\n\n* select the variables of interest and store them in a new data object called `dog_factorial_anova`\n* check for missing values and remove participants who did not have pre- and post-intervention Happiness recorded\n\n\n::: {.callout-note collapse=\"true\" icon=\"false\"}\n\n## Hints\n\n* You need 4 variables: Participant ID, Year of Study, Time point of recording (i.e., pre- or post-intervention), and the self-reported Happiness scores.\n* You should have identified 1 participant who did not complete both ratings. There are 2 options on how to achieve that: \n  * Option 1: identify the missing value visually and filter out their participant ID (works well with smaller dataframes, but not very reproducible) \n  * Option 2: remove the missing value line first and then add a new columns to count how often each participant is now represented in the data object and then only include Participants with a count of 2 ratings in this case (which is the more reproducible option and more appropriate with larger dataframes or when there are loads of missing values).\n\n:::\n\n::: {.callout-caution collapse=\"true\" icon=\"false\"}\n\n## Solution\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n## Option 1\ndog_factorial_anova <- dog_data_long %>%\n  select(RID, Year_of_Study, Stage, SHS) %>% \n  filter(RID != 12)\n\n## Option 2\ndog_factorial_anova <- dog_data_long %>%\n  select(RID, Year_of_Study, Stage, SHS) %>% \n  drop_na() %>% \n  group_by(RID) %>% \n  mutate(RID_count = n()) %>% \n  filter(RID_count == 2)\n```\n:::\n\n\n:::\n\n\n\n## Task 5: Model creating & Assumption checks {.unnumbered}\n\nNow, let's create our ANOVA model.\n\nAccording to our research question we have the following model variables *(use the spelling of the variable names in `dog_factorial_anova`)*: \n\n* Dependent Variable (DV): <input class='webex-solveme nospaces' size='3' data-answer='[\"SHS\"]'/>, assessed pre- and post-intervention\n* Independent Variable 1 (IV 1): <input class='webex-solveme nospaces' size='13' data-answer='[\"Year_of_Study\"]'/> (1st, 2nd, 3rd, 4th, 5th or above) \n* Independent Variable 2 (IV 2): <input class='webex-solveme nospaces' size='5' data-answer='[\"Stage\"]'/> (pre- and post-intervention scores)\n\n\nAs a reminder, the ANOVA model has the following structure:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmod <- aov_ez(id = \"NULL\",\n       data = NULL, \n       between = \"NULL\", \n       within = \"NULL\",\n       dv = \"NULL\", \n       type = 3,\n       anova_table = list(es = \"NULL\"))\n```\n:::\n\n\n\nLet’s use this template to fill in our variables of interest and store the model in a separate object called `mod`. The effect size should be partial eta squared (`\"pes\"`):\n\n::: {.callout-caution collapse=\"true\" icon=\"false\"} \n\n## Solution \n\n\n::: {.cell}\n\n```{.r .cell-code}\nmod <- aov_ez(id = \"RID\",\n       data = dog_factorial_anova, \n       between = \"Year_of_Study\", \n       within = \"Stage\",\n       dv = \"SHS\", \n       type = 3,\n       anova_table = list(es = \"pes\")) \n```\n:::\n\n\n:::\n\n\nLet's check some assumptions.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ncheck_model(mod)\n```\n\n::: {.cell-output-display}\n![](pc-B06_files/figure-html/unnamed-chunk-6-1.png){width=672}\n:::\n\n```{.r .cell-code}\ncheck_homogeneity(mod, method = \"levene\")\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nOK: There is not clear evidence for different variances across groups (Levene's Test, p = 0.882).\n```\n:::\n:::\n\n\nAre the following assumptions met or violated?\n\n* Assumption 1: Continuous DV? <select class='webex-select'><option value='blank'></option><option value='answer'>Assumption met</option><option value=''>Assumption violated</option></select>\n* Assumption 2: Data are independent? <select class='webex-select'><option value='blank'></option><option value='answer'>Assumption met</option><option value=''>Assumption violated</option></select>\n* Assumption 3: Normality? <select class='webex-select'><option value='blank'></option><option value='answer'>Assumption met</option><option value=''>Assumption violated</option></select>\n* Assumption 4: Homoscedasticity? <select class='webex-select'><option value='blank'></option><option value='answer'>Assumption met</option><option value=''>Assumption violated</option></select>\n\n\n\n## Task 6: Interpreting the output {.unnumbered}\n\nCall the model object to view the ANOVA results:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmod\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nAnova Table (Type 3 tests)\n\nResponse: SHS\n               Effect     df  MSE         F  pes p.value\n1       Year_of_Study 4, 278 1.34      1.58 .022    .179\n2               Stage 1, 278 0.09 19.86 *** .067   <.001\n3 Year_of_Study:Stage 4, 278 0.09      0.45 .006    .772\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '+' 0.1 ' ' 1\n```\n:::\n:::\n\n\nHow do you interpret the results?\n\n<div class='webex-radiogroup' id='radio_VOJBDAQWST'><label><input type=\"radio\" autocomplete=\"off\" name=\"radio_VOJBDAQWST\" value=\"x\"></input> <span>The F-value (F = 19.86) indicates a large effect of timepoint on the outcome variable.</span></label><label><input type=\"radio\" autocomplete=\"off\" name=\"radio_VOJBDAQWST\" value=\"x\"></input> <span>The main effect of Year of Study and the interaction are significant, but the main effect of timepoint is not.</span></label><label><input type=\"radio\" autocomplete=\"off\" name=\"radio_VOJBDAQWST\" value=\"x\"></input> <span>The effect size (ηₚ² = 0.067) suggests a small effect of timepoint on the outcome variable.</span></label><label><input type=\"radio\" autocomplete=\"off\" name=\"radio_VOJBDAQWST\" value=\"answer\"></input> <span>The main effect of Year of Study and the interaction are not significant, but the main effect of timepoint is.</span></label></div>\n\n\n",
    "supporting": [
      "pc-B06_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}