{
  "hash": "8a3eeeaeb3825f770ef1679e399578e3",
  "result": {
    "engine": "knitr",
    "markdown": "# 2A Lab 7 Week 9  {.unnumbered}\n\n\n\n\n\n\n\n\n\n\n**This is the pair coding activity related to @sec-nhstI.**\n\n\n::: {.callout-important}\n\nThe pair-coding tasks relating to the inferential chapters are a bit longer than the earlier ones, and you might not finish every step in the lab. Try to work through as much as you can without rushing, and treat any remaining steps as a “Challenge Yourself” activity.\n\n**Intentions behind it?**\n\nThe purpose of the pair-coding tasks from this point on is to walk you through a more complete analysis using a dataset different from the one in the respective chapters. I have chosen not to skip major steps such as descriptives and assumption checks, because real-life data analysis involves more than just running a test. Some smaller steps may be omitted, though, so refer back to the chapters for the full version of the analysis process expected for your lab reports.\n\n:::\n\n## Task 1: Open the R project for the lab {.unnumbered}\n\n## Task 2: Create a new `.Rmd` file {.unnumbered}\n\n... and name it something useful. If you need help, have a look at @sec-rmd.\n\n## Task 3: Load in the library and read in the data {.unnumbered}\n\nThe data should already be in your project folder. If you want a fresh copy, you can download the data again here: [data_pair_coding](data/data_pair_coding.zip \"download\").\n\nWe are using the packages `tidyverse` and `lsr` today, and the data file we need to read in is `dog_data_clean_wide.csv`. I've named my data object `dog_data_wide` to shorten the name but feel free to use whatever object name sounds intuitive to you.\n\nIf you have not worked through chapter 6 yet, you may need to install the package `lsr` before you can load it into the library. Run `install.packages(\"lsr\")` in your **CONSOLE**.\n\n\n\n\n::: {.cell}\n\n:::\n\n\n\n\n\n## Task 4: Tidy data for a Chi-Square t-test {.unnumbered}\n\nLook at `dog_data_wide` and choose two categorical variables. To guide you through this example, I have selected Year of Study and whether or not the students owned pets as my categorical variable.\n\n\n* **Step 1**: Select all relevant columns from `dog_data_wide`. In my case, those would be the participant ID `RID`, `Year_of_Study`, and `Live_Pets`. Store this data in an object called `dog_chi`.\n\n* **Step 2**: Check if we have any missing values in the `dog_chi`. If so remove them with the function `drop_na()`.\n\n* **Step 3**: Convert `Year_of_Study` and `Live_Pets` into factors. Feel free to order the categories meaningfully.\n\n::: {.callout-note collapse=\"true\" icon=\"false\"}\n\n## Hints\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndog_chi <- ??? %>% \n  # Step 1\n  select(???, ???, ???) %>% \n  # Step 2\n  drop_na() %>% \n  # Step 3\n  mutate(Year_of_Study = ???(Year_of_Study,\n                                levels = c(\"First\", \"Second\", \"Third\", \"Fourth\", \"Fifth or above\")),\n         Live_Pets = ???(Live_Pets,\n                            levels = c(\"yes\", \"no\")))\n```\n:::\n\n\n\n\n:::\n\n\n::: {.callout-caution collapse=\"true\" icon=\"false\"}\n\n## Solution for Tasks 3 and 4\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# loading tidyverse and lsr into the library\nlibrary(tidyverse)\nlibrary(lsr)\n\n# reading in `dog_data_clean_wide.csv`\ndog_data_wide <- read_csv(\"dog_data_clean_wide.csv\")\n\n# Task 4: Tidying \ndog_chi <- dog_data_wide %>% \n  # Step 1\n  select(RID, Year_of_Study, Live_Pets) %>% \n  # Step 2\n  drop_na() %>% \n  # Step 3\n  mutate(Year_of_Study = factor(Year_of_Study,\n                                levels = c(\"First\", \"Second\", \"Third\", \"Fourth\", \"Fifth or above\")),\n         Live_Pets = factor(Live_Pets,\n                            levels = c(\"yes\", \"no\")))\n```\n:::\n\n\n\n\n\n:::\n\n## Task 5: Compute descriptives {.unnumbered}\n\nCreate a frequency table (or contingency table to be more exact) from `dog_chi`, i.e., we need counts for each combination of the variables. Store the data in a new data object `dog_chi_contingency`. `dog_chi_contingency` should look like this:\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n`````{=html}\n<table class=\"table\" style=\"margin-left: auto; margin-right: auto;\">\n <thead>\n  <tr>\n   <th style=\"text-align:left;\"> Year_of_Study </th>\n   <th style=\"text-align:right;\"> yes </th>\n   <th style=\"text-align:right;\"> no </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\"> First </td>\n   <td style=\"text-align:right;\"> 21 </td>\n   <td style=\"text-align:right;\"> 89 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Second </td>\n   <td style=\"text-align:right;\"> 37 </td>\n   <td style=\"text-align:right;\"> 64 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Third </td>\n   <td style=\"text-align:right;\"> 12 </td>\n   <td style=\"text-align:right;\"> 22 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Fourth </td>\n   <td style=\"text-align:right;\"> 12 </td>\n   <td style=\"text-align:right;\"> 18 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Fifth or above </td>\n   <td style=\"text-align:right;\"> 3 </td>\n   <td style=\"text-align:right;\"> 2 </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n\n\n\n\n::: {.callout-note collapse=\"true\" icon=\"false\"}\n\n## Hints\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndog_chi_contingency <- dog_chi %>% \n  count(???, ???) %>% \n  pivot_wider(names_from = ???, values_from = n)\n```\n:::\n\n\n\n\n\n::: {.callout-caution collapse=\"true\" icon=\"false\"}\n\n## Solution\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Task 5: Frequency table\ndog_chi_contingency <- dog_chi %>% \n  count(Live_Pets, Year_of_Study) %>% \n  pivot_wider(names_from = Live_Pets, values_from = n)\n```\n:::\n\n\n\n\n:::\n\n:::\n\n\n## Task 6: Check assumptions {.unnumbered}\n\n\n1. Both variables should be categorical, measured at either the ordinal or nominal level. Answer: <select class='webex-select'><option value='blank'></option><option value='answer'>yes</option><option value='x'>no</option></select> as `Year_of_Study` is <select class='webex-select'><option value='blank'></option><option value='answer'>ordinal</option><option value='x'>nominal</option></select>, and `Live_Pets` is <select class='webex-select'><option value='blank'></option><option value='x'>ordinal</option><option value='answer'>nominal</option></select>.\n\n2. Each observation in the dataset has to be independent, meaning the value of one observation does not affect the value of any other. Answer: <select class='webex-select'><option value='blank'></option><option value='answer'>yes</option><option value='x'>no</option></select>\n\n3. Cells in the contingency table are mutually exclusive. Answer: <select class='webex-select'><option value='blank'></option><option value='answer'>yes</option><option value='x'>no</option></select> because each individual can belong to <select class='webex-select'><option value='blank'></option><option value='x'>multiple cells</option><option value='answer'>only one cell</option></select> in the contingency table.\n\n\n## Task 7: Compute a chi-square test & interpret the output {.unnumbered}\n\n* **Step 1**: Use the function `as.data.frame` to turn `dog_chi` into a dataframe. Store this output in a new data object called `dog_chi_df`.\n\n\n::: {.callout-note collapse=\"true\" icon=\"false\"}\n\n## Hints\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n??? <- as.data.frame(???)\n```\n:::\n\n\n\n\n\n::: {.callout-caution collapse=\"true\" icon=\"false\"}\n\n## Solution\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndog_chi_df <- as.data.frame(dog_chi)\n```\n:::\n\n\n\n\n:::\n\n:::\n\n* **Step 2**: Run the `associationTest()` function from the `lsr` package to compute the Chi-Square test. The structure of the function is as follows:\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nassociationTest(formula = ~ Variable1 + Variable2, data = your_dataframe)\n```\n:::\n\n\n\n\n\n::: {.callout-caution collapse=\"true\" icon=\"false\"}\n\n## Solution\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nassociationTest(formula = ~ Year_of_Study + Live_Pets, data = dog_chi_df)\n```\n:::\n\n\n\n\n:::\n\n\n* **Step 3**: Interpreting the output\n\n\n\n\n\n::: {.cell}\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning in associationTest(formula = ~Year_of_Study + Live_Pets, data =\ndog_chi_df): Expected frequencies too small: chi-squared approximation may be\nincorrect\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n     Chi-square test of categorical association\n\nVariables:   Year_of_Study, Live_Pets \n\nHypotheses: \n   null:        variables are independent of one another\n   alternative: some contingency exists between variables\n\nObserved contingency table:\n                Live_Pets\nYear_of_Study    yes no\n  First           21 89\n  Second          37 64\n  Third           12 22\n  Fourth          12 18\n  Fifth or above   3  2\n\nExpected contingency table under the null hypothesis:\n                Live_Pets\nYear_of_Study      yes    no\n  First          33.39 76.61\n  Second         30.66 70.34\n  Third          10.32 23.68\n  Fourth          9.11 20.89\n  Fifth or above  1.52  3.48\n\nTest results: \n   X-squared statistic:  12.276 \n   degrees of freedom:  4 \n   p-value:  0.015 \n\nOther information: \n   estimated effect size (Cramer's v):  0.209 \n   warning: expected frequencies too small, results may be inaccurate\n```\n\n\n:::\n:::\n\n\n\n\n\nThe Chi-Square test revealed that there is <select class='webex-select'><option value='blank'></option><option value='answer'>a statistically significant association</option><option value='x'>no statistically significant association</option></select> between Year of Study and whether students live with pets, $\\chi^2$ (<input class='webex-solveme nospaces' size='1' data-answer='[\"4\"]'/>) = <input class='webex-solveme nospaces' size='5' data-answer='[\"12.28\"]'/>, p = <input class='webex-solveme nospaces' size='4' data-answer='[\".015\"]'/>, V = <input class='webex-solveme nospaces' size='4' data-answer='[\".209\"]'/>. The strength of the association between the variables is considered <select class='webex-select'><option value='blank'></option><option value='x'>small</option><option value='answer'>moderate</option><option value='x'>strong</option></select>. We therefore <select class='webex-select'><option value='blank'></option><option value='x'>fail to reject the null hypothesis</option><option value='answer'>reject the null hypothesis</option></select>.\n\n::: {.callout-note collapse=\"true\" icon=\"false\"}\n\n## I've typed in the correct numbers but my fields don't turn green\n\nCheck which numbers need to have 2 or 3 decimal spaces and (don't) have a leading 0.\n\n:::\n\n",
    "supporting": [
      "pc-A06_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<script src=\"site_libs/kePrint-0.0.1/kePrint.js\"></script>\n<link href=\"site_libs/lightable-0.0.1/lightable.css\" rel=\"stylesheet\" />\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}